{% extends "base.html" %}

{% block title %}API Documentation - {{ super() }}{% endblock %}

{% block content %}
<h2>API Endpoints</h2>

<div class="api-section">
    <h3>GET /api/status</h3>
    <p>Returns the current server status in JSON format.</p>
    <div class="endpoint-example">
        <strong>Example Response:</strong>
        <pre><code>{
  "running": true,
  "host": "localhost",
  "port": 3456,
  "client_count": 2
}</code></pre>
    </div>
</div>

<div class="api-section">
    <h3>GET /bc</h3>
    <p>Broadcast a message to all connected clients via query parameters.</p>
    <p><strong>Required Parameters:</strong></p>
    <ul>
        <li><code>player</code> - Player name</li>
        <li><code>comm</code> - Command/message content</li>
    </ul>
    <div class="endpoint-example">
        <strong>Example:</strong>
        <pre><code>GET /bc?player=TestUser&comm=Hello%20World</code></pre>
    </div>
</div>

<div class="api-section">
    <h3>POST /api/broadcast</h3>
    <p>Broadcast a custom message to all connected clients.</p>
    <div class="endpoint-example">
        <strong>Example Request Body:</strong>
        <pre><code>{
  "message_id": "CUSTOM_MESSAGE",
  "args": {
    "data": "Hello from API"
  }
}</code></pre>
    </div>
</div>

<div class="api-section">
    <h3>POST /api/message</h3>
    <p>Send a private message to a specific client.</p>
    <div class="endpoint-example">
        <strong>Example Request Body:</strong>
        <pre><code>{
  "client_id": "12345",
  "message_id": "PRIVATE_MESSAGE",
  "args": {
    "data": "Private message content"
  }
}</code></pre>
    </div>
</div>

<style>
.api-section {
    margin: 30px 0;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
    border-left: 4px solid #17a2b8;
}

.api-section h3 {
    color: #17a2b8;
    margin-top: 0;
}

.endpoint-example {
    margin-top: 15px;
}

.endpoint-example pre {
    background: #343a40;
    color: #f8f9fa;
    padding: 15px;
    border-radius: 5px;
    overflow-x: auto;
}

.endpoint-example code {
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
}
</style>
{% endblock %}